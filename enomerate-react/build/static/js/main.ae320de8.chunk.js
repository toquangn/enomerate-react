(this["webpackJsonpenomerate-react"]=this["webpackJsonpenomerate-react"]||[]).push([[0],{18:function(e,t,s){},31:function(e,t,s){},32:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(10),r=s.n(c),i=(s(18),s(3)),o=s(4),l=s.n(o),j=s(6),u=s(13),d=s(0);var b=function(){var e=Object(n.useContext)(v).setRestaurants,t=Object(n.useState)(null),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(20),o=Object(i.a)(r,2),b=o[0],h=o[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(d.jsx)("div",{className:"cardContainer",children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"cardDetails",style:{textAlign:"center"},children:[Object(d.jsx)("h4",{className:"searchInstructions",children:"Amount of places to choose from:"}),Object(d.jsx)("h1",{className:"maxLabel",children:b}),Object(d.jsx)(u.a,{axis:"x",xstep:10,xmin:10,xmax:50,x:b,onChange:function(e){var t=e.x;return h(t)}})]}),Object(d.jsx)("h3",{className:"status",children:a})]})}),Object(d.jsx)("div",{className:"buttons",children:Object(d.jsx)("button",{className:"search-button",onClick:function(){navigator.geolocation?(c("Locating..."),navigator.geolocation.getCurrentPosition(function(){var t=Object(j.a)(l.a.mark((function t(s){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(null),t.next=3,fetch("api/".concat(s.coords.latitude,"/").concat(s.coords.longitude,"/").concat(b));case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,a.sort((function(){return Math.random()-.5})),e(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){c("Unable to retrieve your location")}))):c("Geolocation is not supported by your browser")},children:"Search"})})]})},h=s(12),x=s.n(h),m=s(7),O=s.n(m),p=[];var f=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),s=t[0],c=t[1],r=Object(n.useContext)(N),o=r.best,u=r.setBest,b=Object(n.useContext)(v).restaurants,h=Object(n.useContext)(w).setDone,m=Object(n.useMemo)((function(){return Array(b.length).fill(0).map((function(e){return a.a.createRef()}))}),[b]),f=function(){var e=Object(j.a)(l.a.mark((function e(t){var s,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=b.filter((function(e){return!p.includes(e.id)}))).length){e.next=10;break}return n=s[s.length-1].id,a=b.map((function(e){return e.id})).indexOf(n),p.push(n),e.next=7,m[a].current.swipe(t);case 7:"right"!==t||o||u(b[a]),"right"===t&&o&&(u(b[a]),h(!0)),1===s.length&&(o||u(b[a]),h(!0));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(d.jsx)("div",{className:"cardContainer",children:b.map((function(e,t){return Object(d.jsx)(x.a,{ref:m[t],className:"swipe",onSwipe:function(t){return s=t,n=e.name,c(s),void p.push(n);var s,n},children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("div",{style:{backgroundImage:"url("+e.image_url+")"},className:"cardThumbnail"}),Object(d.jsxs)("div",{className:"cardDetails",children:[Object(d.jsx)("h2",{className:"restaurantName",onClick:function(){return window.open("".concat(e.url),"_blank")},children:e.name}),Object(d.jsxs)("div",{children:[Object(d.jsx)(O.a,{rating:e.rating,starRatedColor:"rgb(220, 57, 28)",starDimension:"20px",starSpacing:"0",name:"rating"}),Object(d.jsxs)("span",{className:"reviewCount",children:[e.review_count," reviews"]})]}),Object(d.jsx)("div",{className:"categories",children:e.categories.map((function(e){return e.title})).join(", ")})]})]})},e.name)}))}),Object(d.jsxs)("div",{className:"buttons",children:[Object(d.jsx)("button",{className:"discard-button",onClick:function(){return f("left")},children:"Discard"}),Object(d.jsx)("button",{className:"keep-button",onClick:function(){return f("right")},children:"Keep"})]}),s?Object(d.jsxs)("h2",{className:"infoText",children:["You swiped ",s]},s):Object(d.jsx)("h2",{className:"infoText",children:"Swipe a card or press a button to get started!"})]})};var g=function(){var e=Object(n.useContext)(N).best;return Object(d.jsxs)("div",{children:[Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(d.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(d.jsx)("div",{className:"cardContainer",children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("div",{style:{backgroundImage:"url("+e.image_url+")"},className:"cardThumbnail"}),Object(d.jsxs)("div",{className:"cardDetails",children:[Object(d.jsx)("h2",{className:"restaurantName",onClick:function(){return window.open("".concat(e.url),"_blank")},children:e.name}),Object(d.jsxs)("div",{children:[Object(d.jsx)(O.a,{rating:e.rating,starRatedColor:"rgb(220, 57, 28)",starDimension:"20px",starSpacing:"0",name:"rating"}),Object(d.jsxs)("span",{className:"reviewCount",children:[e.review_count," reviews"]})]}),Object(d.jsx)("div",{className:"categories",children:e.categories.map((function(e){return e.title})).join(", ")})]})]})})]})},v=(s(31),Object(n.createContext)()),N=Object(n.createContext)(),w=Object(n.createContext)();var y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(n.useState)(!1),u=Object(i.a)(j,2),h=u[0],x=u[1];return Object(d.jsx)(v.Provider,{value:{restaurants:s,setRestaurants:a},children:Object(d.jsx)(N.Provider,{value:{best:o,setBest:l},children:Object(d.jsx)(w.Provider,{value:{done:h,setDone:x},children:Object(d.jsxs)("div",{className:"app",children:[h?Object(d.jsx)("h1",{children:"Your best choice:"}):Object(d.jsx)("h1",{children:"Enomerate"}),s.length?h?Object(d.jsx)(g,{}):Object(d.jsx)(f,{}):Object(d.jsx)(b,{})]})})})})},C=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,33)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.getElementById("root")),C()}},[[32,1,2]]]);
//# sourceMappingURL=main.ae320de8.chunk.js.map